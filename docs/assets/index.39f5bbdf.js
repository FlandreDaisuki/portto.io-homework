import{p as e,a as t,r as a,w as o,c as s,o as n,b as l,d as r,t as i,e as c,f as u,g as d,h as m,i as p,F as v,j as k,k as f,l as g,v as b,m as h,n as w}from"./vendor.010bf879.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const o=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const l=new URL(e,o);if(self[t].moduleMap[l])return a(self[t].moduleMap[l]);const r=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){n(new Error(`Failed to import: ${e}`)),s(i)},onload(){a(self[t].moduleMap[l]),s(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/portto.io-homework/assets/");const L={props:{contractAddress:String,tokenId:String},emits:["back"],setup(e,{emit:t}){const n=a({});return o((async()=>{if(e.contractAddress&&e.tokenId){n.value={};const t=await(async({contractAddress:e,tokenId:t})=>{const a=`https://api.opensea.io/api/v1/asset/${e}/${t}?format=json`,o=await fetch(a,{mode:"cors"});return o.ok?{data:await o.json()}:{error:o}})(e);t.error||(n.value=t.data)}})),{item:n,title:s((()=>{var e,t,a;return null!=(a=null==(t=null==(e=n.value)?void 0:e.collection)?void 0:t.name)?a:""})),image:s((()=>{var e,t;return null!=(t=null==(e=n.value)?void 0:e.image_url)?t:""})),name:s((()=>{var e,t;return null!=(t=null==(e=n.value)?void 0:e.name)?t:""})),description:s((()=>{var e,t;return null!=(t=null==(e=n.value)?void 0:e.description)?t:""})),permalink:s((()=>{var e,t;return null!=(t=null==(e=n.value)?void 0:e.permalink)?t:""})),onBackClick:()=>t("back")}}},_=c();e("data-v-bb981c98");const y={class:"layout"};t();const j=_(((e,t,a,o,s,c)=>(n(),l("div",y,[r("header",null,[r("button",{class:"back",onClick:t[1]||(t[1]=(...e)=>o.onBackClick&&o.onBackClick(...e))}," ← "),r("h1",null,i(o.title),1)]),r("div",{class:"image",style:{backgroundImage:`url(${o.image})`}},null,4),r("div",null,i(o.name),1),r("div",null,i(o.description),1),r("a",{href:o.permalink,target:"_blank",role:"button",class:"block text-blue-800 text-xl"}," permalink ",8,["href"])]))));L.render=j,L.__scopeId="data-v-bb981c98";const P={emits:["details"],setup(e,{emit:t}){const o=a(0),s=u([]);d(o,(async e=>{console.log("pc",e);const t=await(async e=>{const t=`https://api.opensea.io/api/v1/assets?format=json&owner=0x960DE9907A2e2f5363646d48D7FB675Cd2892e91&limit=20&offset=${e}`,a=await fetch(t,{mode:"cors"});return a.ok?{data:(await a.json()).assets}:{error:a}})(e);t.error||s.push(...t.data)}),{immediate:!0});const n=a();m((()=>{const e={root:document,rootMargin:"300px",threshold:1},t=new IntersectionObserver((()=>{o.value+=1}),e);t.observe(document.querySelector("#footer")),n.value=t})),p((()=>{n.value.disconnect()}));return{items:s,openDetails:e=>{var a;const o=null==(a=null==e?void 0:e.asset_contract)?void 0:a.address,s=null==e?void 0:e.token_id;t("details",{contractAddress:o,tokenId:s})}}}},C=c();e("data-v-65d9549c");const D=r("h1",{class:"text-3xl"}," List ",-1),x={class:"grid-layout"},I=r("footer",{id:"footer"}," Loading... ",-1);t();const $=C(((e,t,a,o,s,c)=>(n(),l("div",null,[D,r("div",x,[(n(!0),l(v,null,k(o.items,(e=>(n(),l("figure",{key:e.id,onClick:t=>o.openDetails(e)},[r("img",{src:e.image_url,class:"object-contain h-48 w-full"},null,8,["src"]),r("figcaption",null,i(e.name),1)],8,["onClick"])))),128))]),I]))));P.render=$,P.__scopeId="data-v-65d9549c";const B={components:{DetailsPage:L,ListPage:P},setup(){const e=a(!0),t=a(null);d(t,(()=>{e.value=!t.value}));return{isListPage:e,detailProps:t,onDetailsClick:e=>{t.value=e}}}};B.render=function(e,t,a,o,s,i){const c=f("ListPage"),u=f("DetailsPage");return n(),l(v,null,[g(r(c,{onDetails:o.onDetailsClick},null,8,["onDetails"]),[[b,o.isListPage]]),g(r(u,h(o.detailProps,{onBack:t[1]||(t[1]=e=>o.isListPage=!0)}),null,16),[[b,!o.isListPage]])],64)};w(B).mount("#app");
